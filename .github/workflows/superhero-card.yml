name: "ü¶∏‚Äç‚ôÇÔ∏è SUPERHERO CARD GENERATOR"

on:
  workflow_dispatch:
    inputs:
      hero_name:
        description: 'Nome do Her√≥i (ex: H/N)'
        required: true
        default: 'H/N'
      hero_class:
        description: 'Classe do Her√≥i (ex: Superhero)'
        required: false
        default: 'Superhero'
      guild:
        description: 'Guilda/Afilia√ß√£o (ex: 14Ball Official)'
        required: false
        default: '14Ball Official'
      species:
        description: 'Esp√©cie/G√™nero (ex: Human)'
        required: false
        default: 'Human'
      backstory:
        description: 'Hist√≥ria do her√≥i'
        required: false
        default: 'Being from another dimension, H/N doesn''t have any powers. Though, being a very good fighter mixed with having knowledge of most everything makes him a formidable adversary.'
      
      # Stats
      strength:
        description: 'For√ßa (1-10)'
        required: false
        default: '7'
      health:
        description: 'Sa√∫de (1-10)'
        required: false
        default: '8'
      magic:
        description: 'Poder M√°gico (1-10)'
        required: false
        default: '5'
      dexterity:
        description: 'Destreza (1-10)'
        required: false
        default: '9'
      agility:
        description: 'Agilidade (1-10)'
        required: false
        default: '8'
      luck:
        description: 'Sorte (1-10)'
        required: false
        default: '6'
      
      # Skills
      skill_1:
        description: 'Habilidade 1'
        required: false
        default: 'Determination'
      skill_2:
        description: 'Habilidade 2'
        required: false
        default: 'Spinitzu'
      
      # Ranking
      ranking:
        description: 'Ranking (S, A, B, C)'
        required: false
        default: 'A'

permissions:
  contents: write

jobs:
  create-card:
    runs-on: ubuntu-latest
    
    steps:
      - name: üì• Checkout do reposit√≥rio
        uses: actions/checkout@v4
      
      - name: üé® Criar diret√≥rio para cards
        run: mkdir -p cards
      
      - name: üñºÔ∏è Gerar SVG Anime Card
        run: |
          # Pegar os valores dos inputs
          HERO_NAME="${{ github.event.inputs.hero_name }}"
          HERO_CLASS="${{ github.event.inputs.hero_class }}"
          GUILD="${{ github.event.inputs.guild }}"
          SPECIES="${{ github.event.inputs.species }}"
          BACKSTORY="${{ github.event.inputs.backstory }}"
          RANKING="${{ github.event.inputs.ranking }}"
          
          # Stats
          STR="${{ github.event.inputs.strength }}"
          HEALTH="${{ github.event.inputs.health }}"
          MAGIC="${{ github.event.inputs.magic }}"
          DEX="${{ github.event.inputs.dexterity }}"
          AGI="${{ github.event.inputs.agility }}"
          LUCK="${{ github.event.inputs.luck }}"
          
          # Skills
          SKILL1="${{ github.event.inputs.skill_1 }}"
          SKILL2="${{ github.event.inputs.skill_2 }}"
          
          # Data atual
          DATE=$(date +'%d/%m/%Y')
          
          # Calcular larguras das barras (130px max para estilo compacto)
          STR_BAR=$((STR * 13))
          HEALTH_BAR=$((HEALTH * 13))
          MAGIC_BAR=$((MAGIC * 13))
          DEX_BAR=$((DEX * 13))
          AGI_BAR=$((AGI * 13))
          LUCK_BAR=$((LUCK * 13))
          
          # Cor do ranking (cores anime)
          case "$RANKING" in
            "S") RANK_COLOR="#FFD700" ;;  # Ouro
            "A") RANK_COLOR="#FF6B6B" ;;  # Vermelho anime
            "B") RANK_COLOR="#4ECDC4" ;;  # Turquesa
            "C") RANK_COLOR="#95E1D3" ;;  # Verde √°gua
            *) RANK_COLOR="#00B4D8" ;;    # Azul anime
          esac
          
          # Nome do arquivo
          FILENAME=$(echo "$HERO_NAME" | tr -cd '[:alnum:]-_ ' | tr ' ' '_')
          SVG_FILE="cards/${FILENAME}.svg"
          
          # Criar o arquivo SVG com design anime
          cat > "$SVG_FILE" << EOF
          <svg xmlns="http://www.w3.org/2000/svg" width="580" height="380" viewBox="0 0 580 380">
          <defs>
            <!-- Gradientes anime -->
            <linearGradient id="cardGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#1a1a2e"/>
              <stop offset="100%" stop-color="#16213e"/>
            </linearGradient>
            
            <linearGradient id="statGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#FF6B6B"/>
              <stop offset="50%" stop-color="#FF8E8E"/>
              <stop offset="100%" stop-color="#FF6B6B"/>
            </linearGradient>
            
            <linearGradient id="headerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#00B4D8"/>
              <stop offset="100%" stop-color="#0077B6"/>
            </linearGradient>
            
            <!-- Filtros anime -->
            <filter id="softShadow">
              <feDropShadow dx="0" dy="3" stdDeviation="5" flood-color="#000" flood-opacity="0.3"/>
            </filter>
            
            <filter id="glow">
              <feGaussianBlur stdDeviation="2" result="blur"/>
              <feMerge>
                <feMergeNode in="blur"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>
          
          <!-- Fundo do card com cantos arredondados -->
          <rect width="580" height="380" rx="20" fill="url(#cardGradient)"/>
          
          <!-- Header com cantos arredondados -->
          <rect x="20" y="20" width="540" height="60" rx="15" fill="#252547" opacity="0.9"/>
          
          <!-- Nome do Her√≥i -->
          <text x="40" y="55" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="white">$HERO_NAME</text>
          
          <!-- Badge da Classe -->
          <rect x="440" y="30" width="110" height="25" rx="12" fill="url(#headerGradient)"/>
          <text x="450" y="40" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">CLASS</text>
          <text x="495" y="48" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">$HERO_CLASS</text>
          
          <!-- Informa√ß√µes em container arredondado -->
          <g transform="translate(20, 90)">
            <rect x="0" y="0" width="540" height="40" rx="10" fill="#2d3748" opacity="0.8"/>
            
            <!-- Guilda -->
            <text x="20" y="15" font-family="Arial, sans-serif" font-size="12" fill="#A0A0C0">GUIDE</text>
            <text x="20" y="30" font-family="Courier, monospace" font-size="13" font-weight="bold" fill="#FFD166">$GUILD</text>
            
            <!-- Esp√©cie -->
            <text x="300" y="15" font-family="Arial, sans-serif" font-size="12" fill="#A0A0C0">GENDER/SPECIES</text>
            <text x="300" y="30" font-family="Courier, monospace" font-size="13" font-weight="bold" fill="#4ECDC4">$SPECIES</text>
          </g>
          
          <!-- Linha divis√≥ria decorativa -->
          <line x1="20" y1="140" x2="560" y2="140" stroke="#00B4D8" stroke-width="2" opacity="0.5"/>
          
          <!-- Hist√≥ria em container arredondado -->
          <g transform="translate(20, 150)">
            <rect x="0" y="0" width="540" height="50" rx="10" fill="#252547" opacity="0.8"/>
            <text x="15" y="15" font-family="Arial, sans-serif" font-size="13" fill="#FF6B6B" font-weight="bold">INV$</text>
            <text x="15" y="32" font-family="Courier, monospace" font-size="10" fill="#E0E0FF">Backstory:</text>
            <text x="15" y="45" font-family="Courier, monospace" font-size="9" fill="#C0C0E0">$BACKSTORY</text>
          </g>
          
          <!-- T√≠tulo Stats -->
          <text x="30" y="220" font-family="Arial, sans-serif" font-size="18" fill="#00B4D8" font-weight="bold">STATS/#SKILLS</text>
          
          <!-- Stats em grid 2x3 com cantos arredondados -->
          <g transform="translate(30, 235)">
            <!-- Linha 1 -->
            <g>
              <text x="0" y="15" font-family="Arial, sans-serif" font-size="12" fill="#C0C0E0">STRENGTH</text>
              <rect x="100" y="5" width="130" height="10" rx="5" fill="#2A2A4A"/>
              <rect x="100" y="5" width="$STR_BAR" height="10" rx="5" fill="url(#statGradient)"/>
              <text x="235" y="13" font-family="Courier, monospace" font-size="11" fill="white">$STR/10</text>
            </g>
            
            <g transform="translate(280, 0)">
              <text x="0" y="15" font-family="Arial, sans-serif" font-size="12" fill="#C0C0E0">HEALTH</text>
              <rect x="100" y="5" width="130" height="10" rx="5" fill="#2A2A4A"/>
              <rect x="100" y="5" width="$HEALTH_BAR" height="10" rx="5" fill="url(#statGradient)"/>
              <text x="235" y="13" font-family="Courier, monospace" font-size="11" fill="white">$HEALTH/10</text>
            </g>
            
            <!-- Linha 2 -->
            <g transform="translate(0, 35)">
              <text x="0" y="15" font-family="Arial, sans-serif" font-size="12" fill="#C0C0E0">MAGIC POW</text>
              <rect x="100" y="5" width="130" height="10" rx="5" fill="#2A2A4A"/>
              <rect x="100" y="5" width="$MAGIC_BAR" height="10" rx="5" fill="url(#statGradient)"/>
              <text x="235" y="13" font-family="Courier, monospace" font-size="11" fill="white">$MAGIC/10</text>
            </g>
            
            <g transform="translate(280, 35)">
              <text x="0" y="15" font-family="Arial, sans-serif" font-size="12" fill="#C0C0E0">DEXTERITY</text>
              <rect x="100" y="5" width="130" height="10" rx="5" fill="#2A2A4A"/>
              <rect x="100" y="5" width="$DEX_BAR" height="10" rx="5" fill="url(#statGradient)"/>
              <text x="235" y="13" font-family="Courier, monospace" font-size="11" fill="white">$DEX/10</text>
            </g>
            
            <!-- Linha 3 -->
            <g transform="translate(0, 70)">
              <text x="0" y="15" font-family="Arial, sans-serif" font-size="12" fill="#C0C0E0">AGILITY</text>
              <rect x="100" y="5" width="130" height="10" rx="5" fill="#2A2A4A"/>
              <rect x="100" y="5" width="$AGI_BAR" height="10" rx="5" fill="url(#statGradient)"/>
              <text x="235" y="13" font-family="Courier, monospace" font-size="11" fill="white">$AGI/10</text>
            </g>
            
            <g transform="translate(280, 70)">
              <text x="0" y="15" font-family="Arial, sans-serif" font-size="12" fill="#C0C0E0">LUCK</text>
              <rect x="100" y="5" width="130" height="10" rx="5" fill="#2A2A4A"/>
              <rect x="100" y="5" width="$LUCK_BAR" height="10" rx="5" fill="url(#statGradient)"/>
              <text x="235" y="13" font-family="Courier, monospace" font-size="11" fill="white">$LUCK/10</text>
            </g>
          </g>
          
          <!-- Skills em container arredondado -->
          <g transform="translate(30, 320)">
            <rect x="0" y="0" width="250" height="40" rx="10" fill="#252547" opacity="0.8"/>
            <text x="10" y="15" font-family="Arial, sans-serif" font-size="14" fill="#00B4D8" font-weight="bold">ACTIVE SKILLS</text>
            <text x="10" y="30" font-family="Courier, monospace" font-size="12" fill="#FFD166">‚Ä¢ $SKILL1</text>
            <text x="130" y="30" font-family="Courier, monospace" font-size="12" fill="#4ECDC4">‚Ä¢ $SKILL2</text>
          </g>
          
          <!-- Footer com cantos arredondados -->
          <g transform="translate(20, 320)">
            <!-- Superhero label -->
            <rect x="300" y="0" width="120" height="40" rx="10" fill="#2d3748" opacity="0.8"/>
            <text x="310" y="15" font-family="Arial, sans-serif" font-size="14" fill="#FF6B6B" font-weight="bold">SUPERHERO</text>
            
            <!-- Badge do Ranking -->
            <rect x="440" y="0" width="120" height="40" rx="10" fill="#252547" opacity="0.9"/>
            <text x="450" y="15" font-family="Arial, sans-serif" font-size="12" fill="#A0A0C0">RANKING</text>
            <text x="500" y="35" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="$RANK_COLOR" text-anchor="middle">$RANKING</text>
          </g>
          
          <!-- Informa√ß√µes do rodap√© -->
          <g transform="translate(20, 365)">
            <text x="0" y="0" font-family="Courier, monospace" font-size="9" fill="#8888AA">Generated: $DATE</text>
            <text x="400" y="0" font-family="Courier, monospace" font-size="9" fill="#8888AA">Card ID: ${FILENAME}</text>
          </g>
          
          <!-- Elementos decorativos anime (cantos arredondados) -->
          <!-- Cantos superiores -->
          <rect x="25" y="25" width="10" height="10" rx="3" fill="#00B4D8" opacity="0.5"/>
          <rect x="545" y="25" width="10" height="10" rx="3" fill="#FF6B6B" opacity="0.5"/>
          
          <!-- Cantos inferiores -->
          <rect x="25" y="345" width="10" height="10" rx="3" fill="#4ECDC4" opacity="0.5"/>
          <rect x="545" y="345" width="10" height="10" rx="3" fill="#FFD166" opacity="0.5"/>
          
          <!-- Pontos decorativos anime -->
          <circle cx="50" cy="50" r="3" fill="#00B4D8" opacity="0.7"/>
          <circle cx="530" cy="50" r="3" fill="#FF6B6B" opacity="0.7"/>
          <circle cx="50" cy="330" r="3" fill="#4ECDC4" opacity="0.7"/>
          <circle cx="530" cy="330" r="3" fill="#FFD166" opacity="0.7"/>
          
          </svg>
          EOF
          
          echo "‚úÖ Card Anime criado: $SVG_FILE"
          echo "üé® Design: Anime 2D Minimalista"
          echo "========================"
          echo "HER√ìI: $HERO_NAME"
          echo "CLASSE: $HERO_CLASS"
          echo "GUILDA: $GUILD"
          echo "RANKING: $RANKING"
          echo "========================"
      
      - name: üì§ Commit e Push
        run: |
          git config user.name "github-actions"
          git config user.email "github-actions@github.com"
          
          if git status --porcelain | grep -q "cards/"; then
            git add cards/
            git commit -m "ü¶∏‚Äç‚ôÇÔ∏è Novo card anime: ${{ github.event.inputs.hero_name }}"
            git push
            echo "‚úÖ Card salvo com sucesso!"
          else
            echo "‚ö†Ô∏è Nenhuma altera√ß√£o para commitar"
          fi
