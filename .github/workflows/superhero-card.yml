name: "ü¶∏‚Äç‚ôÇÔ∏è SUPERHERO CARD GENERATOR"

on:
  workflow_dispatch:
    inputs:
      hero_name:
        description: 'Nome do Her√≥i (ex: H/N)'
        required: true
        default: 'H/N'
      hero_class:
        description: 'Classe do Her√≥i (ex: Superhero)'
        required: false
        default: 'Superhero'
      guild:
        description: 'Guilda/Afilia√ß√£o (ex: 14Ball Official)'
        required: false
        default: '14Ball Official'
      species:
        description: 'Esp√©cie/G√™nero (ex: Human)'
        required: false
        default: 'Human'
      backstory:
        description: 'Hist√≥ria do her√≥i'
        required: false
        default: 'Being from another dimension, H/N doesn''t have any powers. Though, being a very good fighter mixed with having knowledge of most everything makes him a formidable adversary.'
      
      # Stats
      strength:
        description: 'For√ßa (1-10)'
        required: false
        default: '7'
      health:
        description: 'Sa√∫de (1-10)'
        required: false
        default: '8'
      magic:
        description: 'Poder M√°gico (1-10)'
        required: false
        default: '5'
      dexterity:
        description: 'Destreza (1-10)'
        required: false
        default: '9'
      agility:
        description: 'Agilidade (1-10)'
        required: false
        default: '8'
      luck:
        description: 'Sorte (1-10)'
        required: false
        default: '6'
      
      # Skills
      skill_1:
        description: 'Habilidade 1'
        required: false
        default: 'Determination'
      skill_2:
        description: 'Habilidade 2'
        required: false
        default: 'Spinitzu'
      
      # Ranking
      ranking:
        description: 'Ranking (S, A, B, C)'
        required: false
        default: 'A'

permissions:
  contents: write

jobs:
  create-card:
    runs-on: ubuntu-latest
    
    steps:
      - name: üì• Checkout do reposit√≥rio
        uses: actions/checkout@v4
      
      - name: üé® Criar diret√≥rio para cards
        run: mkdir -p cards
      
      - name: üñºÔ∏è Gerar SVG do Card
        run: |
          # Pegar os valores dos inputs
          HERO_NAME="${{ github.event.inputs.hero_name }}"
          HERO_CLASS="${{ github.event.inputs.hero_class }}"
          GUILD="${{ github.event.inputs.guild }}"
          SPECIES="${{ github.event.inputs.species }}"
          BACKSTORY="${{ github.event.inputs.backstory }}"
          RANKING="${{ github.event.inputs.ranking }}"
          
          # Stats
          STR="${{ github.event.inputs.strength }}"
          HEALTH="${{ github.event.inputs.health }}"
          MAGIC="${{ github.event.inputs.magic }}"
          DEX="${{ github.event.inputs.dexterity }}"
          AGI="${{ github.event.inputs.agility }}"
          LUCK="${{ github.event.inputs.luck }}"
          
          # Skills
          SKILL1="${{ github.event.inputs.skill_1 }}"
          SKILL2="${{ github.event.inputs.skill_2 }}"
          
          # Data atual
          DATE=$(date +'%d/%m/%Y')
          
          # Calcular larguras das barras
          STR_BAR=$((STR * 15))
          HEALTH_BAR=$((HEALTH * 15))
          MAGIC_BAR=$((MAGIC * 15))
          DEX_BAR=$((DEX * 15))
          AGI_BAR=$((AGI * 15))
          LUCK_BAR=$((LUCK * 15))
          
          # Cor do ranking
          case "$RANKING" in
            "S") RANK_COLOR="#FFD700" ;;
            "A") RANK_COLOR="#FF4500" ;;
            "B") RANK_COLOR="#1E90FF" ;;
            "C") RANK_COLOR="#32CD32" ;;
            *) RANK_COLOR="#8B0000" ;;
          esac
          
          # Nome do arquivo (remover caracteres especiais)
          FILENAME=$(echo "$HERO_NAME" | tr -cd '[:alnum:]-_ ' | tr ' ' '_')
          SVG_FILE="cards/${FILENAME}.svg"
          
          # Criar o arquivo SVG
          cat > "$SVG_FILE" << EOF
          <svg xmlns="http://www.w3.org/2000/svg" width="600" height="400" viewBox="0 0 600 400">
            <!-- Fundo -->
            <rect width="600" height="400" fill="#f0f0f0" stroke="#000" stroke-width="3"/>
            
            <!-- Cabe√ßalho -->
            <rect x="20" y="20" width="560" height="60" fill="#fff" stroke="#000" stroke-width="2"/>
            <text x="40" y="55" font-family="Arial" font-size="36" font-weight="bold">$HERO_NAME</text>
            <text x="450" y="35" font-family="Arial" font-size="20">SLASS</text>
            <text x="450" y="60" font-family="Courier" font-size="18" font-weight="bold">$HERO_CLASS</text>
            
            <!-- Informa√ß√µes -->
            <text x="30" y="95" font-family="Arial" font-size="20">GUIDE</text>
            <text x="100" y="95" font-family="Courier" font-size="16" font-weight="bold">$GUILD</text>
            <text x="300" y="95" font-family="Arial" font-size="18">GENDER/SPECIES</text>
            <text x="480" y="95" font-family="Courier" font-size="16" font-weight="bold">$SPECIES</text>
            
            <!-- Linha -->
            <line x1="20" y1="105" x2="580" y2="105" stroke="#000" stroke-width="1"/>
            
            <!-- Hist√≥ria -->
            <rect x="20" y="115" width="560" height="60" fill="#e8e8e8" stroke="#000" stroke-width="1"/>
            <text x="30" y="135" font-family="Arial" font-size="22" fill="#8b0000" font-weight="bold">INV$</text>
            <text x="30" y="155" font-family="Courier" font-size="12" font-weight="bold">Backstory:</text>
            <text x="30" y="170" font-family="Courier" font-size="11">$BACKSTORY</text>
            
            <!-- T√≠tulo Stats -->
            <text x="30" y="205" font-family="Arial" font-size="24" fill="#8b0000" font-weight="bold">STATS/#SKILLS</text>
            
            <!-- Stats - Coluna Esquerda -->
            <!-- STRENGTH -->
            <text x="30" y="235" font-family="Arial" font-size="20">STRENGTH</text>
            <rect x="150" y="220" width="150" height="15" fill="#ccc" stroke="#000" stroke-width="1"/>
            <rect x="150" y="220" width="$STR_BAR" height="15" fill="#8b0000"/>
            <text x="310" y="233" font-family="Courier" font-size="14" font-weight="bold">$STR/10</text>
            
            <!-- HEALTH -->
            <text x="30" y="265" font-family="Arial" font-size="20">HEALTH</text>
            <rect x="150" y="250" width="150" height="15" fill="#ccc" stroke="#000" stroke-width="1"/>
            <rect x="150" y="250" width="$HEALTH_BAR" height="15" fill="#8b0000"/>
            <text x="310" y="263" font-family="Courier" font-size="14" font-weight="bold">$HEALTH/10</text>
            
            <!-- MAGIC POW -->
            <text x="30" y="295" font-family="Arial" font-size="20">MAGIC POW</text>
            <rect x="150" y="280" width="150" height="15" fill="#ccc" stroke="#000" stroke-width="1"/>
            <rect x="150" y="280" width="$MAGIC_BAR" height="15" fill="#8b0000"/>
            <text x="310" y="293" font-family="Courier" font-size="14" font-weight="bold">$MAGIC/10</text>
            
            <!-- Stats - Coluna Direita -->
            <!-- DEXTERITY -->
            <text x="30" y="325" font-family="Arial" font-size="20">DEXTERITY</text>
            <rect x="150" y="310" width="150" height="15" fill="#ccc" stroke="#000" stroke-width="1"/>
            <rect x="150" y="310" width="$DEX_BAR" height="15" fill="#8b0000"/>
            <text x="310" y="323" font-family="Courier" font-size="14" font-weight="bold">$DEX/10</text>
            
            <!-- AGILITY -->
            <text x="30" y="355" font-family="Arial" font-size="20">AGILITY</text>
            <rect x="150" y="340" width="150" height="15" fill="#ccc" stroke="#000" stroke-width="1"/>
            <rect x="150" y="340" width="$AGI_BAR" height="15" fill="#8b0000"/>
            <text x="310" y="353" font-family="Courier" font-size="14" font-weight="bold">$AGI/10</text>
            
            <!-- LUCK -->
            <text x="30" y="385" font-family="Arial" font-size="20">LUCK</text>
            <rect x="150" y="370" width="150" height="15" fill="#ccc" stroke="#000" stroke-width="1"/>
            <rect x="150" y="370" width="$LUCK_BAR" height="15" fill="#8b0000"/>
            <text x="310" y="383" font-family="Courier" font-size="14" font-weight="bold">$LUCK/10</text>
            
            <!-- Skills -->
            <text x="400" y="235" font-family="Arial" font-size="22" fill="#8b0000" font-weight="bold">ACTIVE SKILLS</text>
            <rect x="400" y="245" width="160" height="120" fill="#e8e8e8" stroke="#000" stroke-width="1"/>
            <text x="410" y="265" font-family="Courier" font-size="14" font-weight="bold">‚Ä¢ $SKILL1</text>
            <text x="410" y="285" font-family="Courier" font-size="14" font-weight="bold">‚Ä¢ $SKILL2</text>
            <text x="410" y="305" font-family="Courier" font-size="14" font-weight="bold" opacity="0.5">‚Ä¢ [Empty Slot]</text>
            <text x="410" y="325" font-family="Courier" font-size="14" font-weight="bold" opacity="0.5">‚Ä¢ [Empty Slot]</text>
            
            <!-- Footer -->
            <text x="30" y="420" font-family="Arial" font-size="22" fill="#8b0000" font-weight="bold">SUPERHERO</text>
            
            <!-- Ranking -->
            <rect x="400" y="385" width="160" height="50" fill="#fff" stroke="#000" stroke-width="2"/>
            <text x="410" y="405" font-family="Arial" font-size="20">RANKING</text>
            <text x="475" y="430" font-family="Arial" font-size="32" font-weight="bold" fill="$RANK_COLOR">$RANKING</text>
            
            <!-- Data -->
            <text x="30" y="450" font-family="Courier" font-size="10">Generated: $DATE</text>
            <text x="400" y="450" font-family="Courier" font-size="10">Card ID: ${FILENAME}</text>
            
            <!-- Cantos decorativos -->
            <rect x="15" y="15" width="10" height="10" fill="#8b0000"/>
            <rect x="575" y="15" width="10" height="10" fill="#8b0000"/>
            <rect x="15" y="375" width="10" height="10" fill="#8b0000"/>
            <rect x="575" y="375" width="10" height="10" fill="#8b0000"/>
          </svg>
          EOF
          
          echo "‚úÖ Card criado: $SVG_FILE"
          echo "üé® Visualiza√ß√£o:"
          echo "========================"
          echo "HER√ìI: $HERO_NAME"
          echo "CLASSE: $HERO_CLASS"
          echo "GUILDA: $GUILD"
          echo "RANKING: $RANKING"
          echo "========================"
      
      - name: üì§ Commit e Push
        run: |
          git config user.name "github-actions"
          git config user.email "github-actions@github.com"
          
          if git status --porcelain | grep -q "cards/"; then
            git add cards/
            git commit -m "ü¶∏‚Äç‚ôÇÔ∏è Novo card: ${{ github.event.inputs.hero_name }}"
            git push
            echo "‚úÖ Card salvo com sucesso!"
          else
            echo "‚ö†Ô∏è Nenhuma altera√ß√£o para commitar"
          fi
